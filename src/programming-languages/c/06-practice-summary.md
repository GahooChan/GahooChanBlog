# 实战小练习与基础语法小结

小朋友们，现在我们已经学习了C语言的一些基础语法知识。让我们通过一些小练习来巩固一下所学的内容吧！

## 实战小练习

### 练习1：计算1到100的和

让我们写一个程序来计算1到100的所有整数的和。这是一个经典的循环练习。

```c
#include <stdio.h>

int main() {
    int sum = 0;  // 用来存储和
    int i;
    
    // 使用for循环计算1到100的和
    for (i = 1; i <= 100; i++) {
        sum = sum + i;
    }
    
    printf("1到100的和是：%d\n", sum);
    
    return 0;
}
```

运行这段代码，你会得到什么结果呢？让我们来验证一下：

```
1到100的和是：5050
```

### 练习2：判断一个数是否为素数

素数是只能被1和它本身整除的数。让我们写一个程序来判断一个数是否为素数。

```c
#include <stdio.h>

int main() {
    int num = 17;  // 要判断的数
    int i;
    int is_prime = 1;  // 假设num是素数
    
    // 检查num是否能被2到num-1的数整除
    for (i = 2; i < num; i++) {
        if (num % i == 0) {
            is_prime = 0;  // 如果能被整除，那么num不是素数
            break;  // 跳出循环
        }
    }
    
    // 根据is_prime的值输出结果
    if (is_prime == 1) {
        printf("%d是素数\n", num);
    } else {
        printf("%d不是素数\n", num);
    }
    
    return 0;
}
```

试着运行这段代码，然后修改`num`的值，看看不同的数会得到什么结果。

### 练习3：打印乘法表

让我们写一个程序来打印九九乘法表。

```c
#include <stdio.h>

int main() {
    int i, j;
    
    // 外层循环控制行数
    for (i = 1; i <= 9; i++) {
        // 内层循环控制每行的列数
        for (j = 1; j <= i; j++) {
            printf("%d*%d=%d\t", j, i, j*i);
        }
        printf("\n");  // 每行结束后换行
    }
    
    return 0;
}
```

运行这段代码，你会看到一个完整的九九乘法表。

## C语言基础语法小结

通过前面的学习，我们已经掌握了C语言的一些基础知识：

### 1. C程序的基本结构

```c
#include <stdio.h>

int main() {
    // 程序代码
    
    return 0;
}
```

每个C程序都必须有一个`main`函数，它是程序的入口点。`#include <stdio.h>`是一个预处理指令，用来引入`stdio.h`头文件，这个头文件包含了输入输出函数的声明。

### 2. 预处理指令

预处理指令是在程序编译前由预处理器执行的命令，它们通常以`#`开头。预处理指令可以帮助我们更好地组织和管理代码。

#### 2.1 #include：引入头文件

我们已经见过`#include`指令，它用来引入头文件：

```c
#include <stdio.h>  // 引入标准输入输出头文件
#include "myheader.h"  // 引入自定义头文件
```

`#include <stdio.h>`用来引入系统头文件，而`#include "myheader.h"`用来引入我们自己编写的头文件。

#### 2.2 #define：定义宏

`#define`指令用来定义宏，宏可以看作是一个简单的文本替换。就像你给朋友起了个昵称，以后你叫这个昵称时，大家都知道你在叫谁。

```c
// 定义一个表示圆周率的宏
#define PI 3.14159

// 定义一个计算圆面积的宏函数
#define AREA_OF_CIRCLE(r) (PI * (r) * (r))

#include <stdio.h>

int main() {
    float radius = 5.0;
    float area = AREA_OF_CIRCLE(radius);
    
    printf("半径为%.1f的圆的面积是：%.2f\n", radius, area);
    // 上面的代码在编译前会被替换为：
    // printf("半径为%.1f的圆的面积是：%.2f\n", radius, (3.14159 * (radius) * (radius)));
    
    return 0;
}
```

使用宏的好处是：
- 可以避免重复输入相同的值
- 修改宏定义后，所有使用该宏的地方都会自动更新
- 宏函数可以像函数一样使用，但没有函数调用的开销

### 宏函数的高级用法

宏函数不仅可以做简单的替换，还有很多高级的用法哦！

#### 带多个参数的宏函数

宏函数可以接受多个参数，就像真正的函数一样：

```c
#define ADD(a, b) ((a) + (b))
#define SUBTRACT(a, b) ((a) - (b))
#define MULTIPLY(a, b) ((a) * (b))
#define DIVIDE(a, b) ((a) / (b))
```

#### 包含多条语句的宏函数

宏函数也可以包含多条语句，使用`\`符号来换行：

```c
#define SWAP(a, b, type) \
    do { \
        type temp = (a); \
        (a) = (b); \
        (b) = temp; \
    } while(0)

// 使用示例
int main() {
    int x = 10, y = 20;
    SWAP(x, y, int);
    printf("x = %d, y = %d\n", x, y);  // 输出：x = 20, y = 10
    return 0;
}
```

#### 字符串化操作符（#）

字符串化操作符`#`可以将宏参数转换为字符串：

```c
#define PRINT_VAR(var) printf("%s = %d\n", #var, var)

int main() {
    int score = 95;
    PRINT_VAR(score);  // 输出：score = 95
    return 0;
}
```

#### 连接操作符（##）

连接操作符`##`可以将两个标识符连接成一个新的标识符：

```c
#define CREATE_VAR(prefix, num) prefix##num

int main() {
    int CREATE_VAR(counter, 1) = 10;  // 相当于 int counter1 = 10;
    int CREATE_VAR(counter, 2) = 20;  // 相当于 int counter2 = 20;
    printf("counter1 = %d, counter2 = %d\n", counter1, counter2);
    return 0;
}
```

#### 可变参数宏

C99标准引入了可变参数宏，可以接受可变数量的参数：

```c
#define PRINTF(format, ...) printf(format, __VA_ARGS__)

int main() {
    PRINTF("Hello, %s!\n", "world");  // 输出：Hello, world!
    PRINTF("x = %d, y = %d\n", 10, 20);  // 输出：x = 10, y = 20
    return 0;
}
```

#### 使用宏函数的注意事项

虽然宏函数很强大，但使用时也需要注意一些问题：

1. **括号很重要**：一定要给宏参数和整个宏体加上足够的括号，避免运算符优先级导致的问题
2. **可能导致代码膨胀**：因为宏是文本替换，多次使用同一个宏会导致生成的代码变大
3. **没有类型检查**：宏不像函数那样有参数类型检查，使用时要格外小心
4. **不能调试**：宏在编译前就被替换了，所以无法像函数那样进行调试

#### 宏函数与普通函数的对比

- **执行速度**：宏函数更快，因为它是编译时替换，没有函数调用的开销
- **代码大小**：宏函数可能导致代码更大，而函数不会
- **参数检查**：函数有参数类型检查，宏没有
- **调试**：函数可以调试，宏不能

宏函数是C语言中一个非常强大的工具，合理使用可以让你的代码更简洁、更高效！

#### 2.3 #ifdef, #ifndef, #else, #endif：条件编译

这些指令可以让我们根据条件来决定是否编译某部分代码：

```c
#define DEBUG 1  // 定义DEBUG宏

#include <stdio.h>

int main() {
#ifdef DEBUG
    printf("调试信息：程序开始执行\n");
#endif
    
    // 程序的主要代码
    int a = 10;
    int b = 20;
    int sum = a + b;
    
#ifdef DEBUG
    printf("调试信息：a = %d, b = %d, sum = %d\n", a, b, sum);
#endif
    
    printf("结果：%d\n", sum);
    
    return 0;
}
```

在这个例子中，如果`DEBUG`宏被定义，那么调试信息就会被编译到程序中；如果没有定义`DEBUG`宏，那么调试信息就不会被编译到程序中。

### 3. 变量和数据类型

- **变量**：用来存储数据的容器，必须先声明后使用
- **基本数据类型**：
  - `int`：整数类型
  - `float`：单精度浮点数
  - `double`：双精度浮点数
  - `char`：字符类型

### 4. 运算符

- **算术运算符**：`+`, `-`, `*`, `/`, `%`
- **赋值运算符**：`=`, `+=`, `-=`, `*=`, `/=`, `%=`
- **自增自减运算符**：`++`, `--`
- **比较运算符**：`>`, `<`, `>=`, `<=`, `==`, `!=`
- **逻辑运算符**：`&&`, `||`, `!`

### 5. 控制语句

- **if语句**：根据条件执行不同的代码
  ```c
  if (条件) {
      // 条件为真时执行的代码
  } else if (另一个条件) {
      // 这个条件为真时执行的代码
  } else {
      // 所有条件都不为真时执行的代码
  }
  ```

- **switch语句**：根据表达式的值选择要执行的代码块
  ```c
  switch (表达式) {
      case 值1:
          // 代码
          break;
      case 值2:
          // 代码
          break;
      // ...
      default:
          // 代码
          break;
  }
  ```

### 6. 循环语句

- **while循环**：当条件为真时重复执行代码
  ```c
  while (条件) {
      // 要重复执行的代码
  }
  ```

- **do-while循环**：先执行一次代码，然后当条件为真时重复执行
  ```c
  do {
      // 要执行的代码
  } while (条件);
  ```

- **for循环**：更灵活的循环结构
  ```c
  for (初始化; 条件; 更新) {
      // 要重复执行的代码
  }
  ```

### 7. break和continue语句

- `break`：立即跳出当前循环
- `continue`：跳过当前循环的剩余部分，直接进入下一次循环

## 动手试一试

请编写一个程序，使用循环和条件语句来找出1到100之间的所有素数。

## 挑战任务

1. 创建一个程序，使用循环实现斐波那契数列的前20项
2. 斐波那契数列的定义：第一个和第二个数都是1，从第三个数开始，每个数都是前两个数的和
3. 输出结果应该类似于：1, 1, 2, 3, 5, 8, 13, ...

提示：你可以使用三个变量来存储前一个数、当前数和下一个数，然后在循环中不断更新它们。

恭喜你！你已经完成了C语言基础语法的学习。下一节我们将学习函数与数组，让我们的程序更加有条理。